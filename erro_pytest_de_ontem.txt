============================= test session starts ==============================
platform linux -- Python 3.10.4, pytest-7.1.2, pluggy-1.0.0 -- /home/marcelo/Dropbox/Django Framework - Roger/buser_twiitter_tech/.venv/bin/python
cachedir: .pytest_cache
django: settings: clonnado_twiter.settings (from env)
rootdir: /home/marcelo/Dropbox/Django Framework - Roger/buser_twiitter_tech, configfile: setup.cfg
plugins: cov-3.0.0, django-4.5.2, responses-0.5.0
collecting ... collected 5 items

contas/tests/test_login_usuario.py::test_registro_usuario ERROR
contas/tests/test_login_usuario.py::test_renderizar_views_login[opcoes] PASSED
contas/tests/test_login_usuario.py::test_renderizar_views_login[registro] PASSED
contas/tests/test_login_usuario.py::test_renderizar_views_login[login] PASSED
pagina_web/tests/test_modulo_noticias.py::test_status_resposta_api PASSED

==================================== ERRORS ====================================
___________________ ERROR at setup of test_registro_usuario ____________________

self = <django.db.backends.utils.CursorWrapper object at 0x7facd1d81d80>
sql = 'ALTER TABLE "contas_profile" ADD CONSTRAINT "contas_profile_user_id_80b54c32_fk_auth_user_id" FOREIGN KEY ("user_id") REFERENCES "auth_user" ("id") DEFERRABLE INITIALLY DEFERRED'
params = ()
ignored_wrapper_args = (False, {'connection': <django.db.backends.postgresql.base.DatabaseWrapper object at 0x7facd2b9fac0>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0x7facd1d81d80>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)
E               psycopg2.errors.UndefinedTable: relation "auth_user" does not exist

.venv/lib/python3.10/site-packages/django/db/backends/utils.py:89: UndefinedTable

The above exception was the direct cause of the following exception:

request = <SubRequest '_django_db_marker' for <Function test_registro_usuario>>

    @pytest.fixture(autouse=True)
    def _django_db_marker(request) -> None:
        """Implement the django_db marker, internal to pytest-django."""
        marker = request.node.get_closest_marker("django_db")
        if marker:
>           request.getfixturevalue("_django_db_helper")

.venv/lib/python3.10/site-packages/pytest_django/plugin.py:465: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.venv/lib/python3.10/site-packages/pytest_django/fixtures.py:122: in django_db_setup
    db_cfg = setup_databases(
.venv/lib/python3.10/site-packages/django/test/utils.py:220: in setup_databases
    connection.creation.create_test_db(
.venv/lib/python3.10/site-packages/django/db/backends/base/creation.py:79: in create_test_db
    call_command(
.venv/lib/python3.10/site-packages/django/core/management/__init__.py:198: in call_command
    return command.execute(*args, **defaults)
.venv/lib/python3.10/site-packages/django/core/management/base.py:460: in execute
    output = self.handle(*args, **options)
.venv/lib/python3.10/site-packages/django/core/management/base.py:98: in wrapped
    res = handle_func(*args, **kwargs)
.venv/lib/python3.10/site-packages/django/core/management/commands/migrate.py:255: in handle
    self.sync_apps(connection, executor.loader.unmigrated_apps)
.venv/lib/python3.10/site-packages/django/core/management/commands/migrate.py:402: in sync_apps
    with connection.schema_editor() as editor:
.venv/lib/python3.10/site-packages/django/db/backends/base/schema.py:157: in __exit__
    self.execute(sql)
.venv/lib/python3.10/site-packages/django/db/backends/base/schema.py:192: in execute
    cursor.execute(sql, params)
.venv/lib/python3.10/site-packages/django/db/backends/utils.py:67: in execute
    return self._execute_with_wrappers(
.venv/lib/python3.10/site-packages/django/db/backends/utils.py:80: in _execute_with_wrappers
    return executor(sql, params, many, context)
.venv/lib/python3.10/site-packages/django/db/backends/utils.py:84: in _execute
    with self.db.wrap_database_errors:
.venv/lib/python3.10/site-packages/django/db/utils.py:91: in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <django.db.backends.utils.CursorWrapper object at 0x7facd1d81d80>
sql = 'ALTER TABLE "contas_profile" ADD CONSTRAINT "contas_profile_user_id_80b54c32_fk_auth_user_id" FOREIGN KEY ("user_id") REFERENCES "auth_user" ("id") DEFERRABLE INITIALLY DEFERRED'
params = ()
ignored_wrapper_args = (False, {'connection': <django.db.backends.postgresql.base.DatabaseWrapper object at 0x7facd2b9fac0>, 'cursor': <django.db.backends.utils.CursorWrapper object at 0x7facd1d81d80>})

    def _execute(self, sql, params, *ignored_wrapper_args):
        self.db.validate_no_broken_transaction()
        with self.db.wrap_database_errors:
            if params is None:
                # params default might be backend specific.
                return self.cursor.execute(sql)
            else:
>               return self.cursor.execute(sql, params)
E               django.db.utils.ProgrammingError: relation "auth_user" does not exist

.venv/lib/python3.10/site-packages/django/db/backends/utils.py:89: ProgrammingError
=============================== warnings summary ===============================
contas/tests/test_login_usuario.py: 16 warnings
pagina_web/tests/test_modulo_noticias.py: 4 warnings
  /home/marcelo/Dropbox/Django Framework - Roger/buser_twiitter_tech/.venv/lib/python3.10/site-packages/pytest_responses.py:9: DeprecationWarning: distutils Version classes are deprecated. Use packaging.version instead.
    if LooseVersion(pytest.__version__) >= LooseVersion('4.0.0'):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR contas/tests/test_login_usuario.py::test_registro_usuario - django.db.u...
=================== 4 passed, 20 warnings, 1 error in 0.59s ====================
